server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # Security headers required for MediaPipe
    add_header Cross-Origin-Opener-Policy same-origin always;
    add_header Cross-Origin-Embedder-Policy require-corp always;

    # Handle WASM and other MediaPipe file types
    location ~ \.(wasm|data|binarypb)$ {
        types {
            application/wasm wasm;
            application/octet-stream data;
            application/octet-stream binarypb;
        }
    }

    # Serve MediaPipe files
    location /mediapipe/ {
        alias /usr/share/nginx/html/mediapipe/;
        try_files $uri $uri/ =404;
    }

    # Handle React routing
    location / {
        try_files $uri $uri/ /index.html;
    }
}